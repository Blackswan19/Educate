<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BStudyroom</title>
    <link rel="icon" type="image/x-icon" href="https://i.ibb.co/bND6ZhX/logo.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Orbitron:wght@400..900&family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&family=Strait&display=swap');

    body {
      font-family: "Red Hat Display", sans-serif;
      margin: 0;
      padding: 0;
      background-color: #181818;
    }

    .header {
      background-color: #04278e;
      color: white;
      padding: 3px;
      text-align: center;
    }

    .main-container {
      display: flex;
      height: calc(100vh - 75px); 
    }

    .left-section, .right-section {
      padding: 20px;
      box-sizing: border-box;
      overflow: auto; 
    }

    .left-section {
      width: 50%;
      text-align: center;
    }

    .section-title {
      margin-bottom: 10px;
      font-size: 1.2em;
      color: #ffffff;
    }

    .display-section {
      margin-top: 20px;
      border-top: 1px solid #ccc;
      padding-top: 20px;
      position: relative;
    }

    .display-section img {
      max-width: 100%;
      height: auto;
      display: block;
    }

    .expand-icon {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 30px;
      color: white;
      cursor: pointer;
    }

    .thumbnails-container {
      display: flex;
      align-items: center;
      margin-top: 10px;
      justify-content: center;
      overflow-x: auto; 
      white-space: nowrap; 
      padding-bottom: 10px; 
    }

    .thumbnails {
      display: flex;
      margin-right: 10px; 
    }

    .thumbnails img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      margin: 5px;
      cursor: pointer;
      border: 2px solid transparent;
    }

    .thumbnails img:hover {
      border: 2px solid #04278e;
    }

    .plus-icon {
      font-size: 50px;
      color: #999;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100px;
      width: 100px;
      border: 2px dashed #ccc;
    }

    .plus-icon:hover {
      color: #666;
      border-color: #666;
    }

    .resizer {
      cursor: ew-resize;
      width: 5px;
      background: #9f9f9f;
      margin: 0 5px;
    }

    .right-section {
      width: 50%; 
    }

    textarea#textInput {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
      font-size: 16px;
      background: #00000045;
      color: #ffffffad;
      outline: none;
      height: 35%;
    }

    .input-group {
      color: #ffffff;
      border: solid 1px #3c3c3c;
      padding: 5px 30px;
      border-radius: 10px;
    }

    .display-section p {
      display: none;
      white-space: pre-wrap;
    }

    .submit-button {
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #04278e;
      color: white;
      border: none;
      cursor: pointer;
      font-family: "Red Hat Display", sans-serif;
      font-size: 1em;
    }

    .submit-button:hover {
      background-color: #0e4affa6;
    }

    #imageInput {
      display: none;
    }

    .delete-icon {
      font-size: 15px;
      color: #dd0000c5;
      margin-left: -20px;
      cursor: pointer;
      background-color: #000000;
      padding: 10px 14px;
      border-radius: 45px;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      justify-content: center;
      align-items: center;
    }

    .modal img {
      max-width: 90%;
      max-height: 90%;
    }

    .close-modal {
      position: absolute;
      top: 10px;
      right: 20px;
      color: white;
      font-size: 30px;
      cursor: pointer;
    }
    .fa-solid, .fas {
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    color: #ab0000;
}
    @media (max-width: 768px) {
      .left-section, .right-section {
        width: 100%;
        border: none; 
      }
    }

    i.fa-solid.fa-up-right-and-down-left-from-center {
      background: #26262669;
    color: #ffffff;
    border: none;
    padding: 10px;
    border-radius: 5px;
    margin-top: 18px;
    font-size: 16px;
    border: solid 1px gray;
    }
  </style>
</head>
<body>

  <div class="header">
    <h1>BStudyroom</h1>
  </div>

  <div class="main-container">
    <!-- Left Section: Image Upload and Display -->
    <div class="left-section" id="leftSection">
      <div class="section-title">Upload Image</div>
      <div class="display-section">
        <img id="displayImage">
        <span class="expand-icon" onclick="openModal()">
          <i class="fa-solid fa-up-right-and-down-left-from-center"></i>
        </span>
      </div>
      <div class="thumbnails-container">
        <div class="thumbnails" id="thumbnailsContainer"></div>
        <div class="plus-icon" onclick="document.getElementById('imageInput').click();">
          +
        </div>
      </div>
      <input type="file" id="imageInput" accept="image/*" multiple onchange="addThumbnail()" />
    </div>

    <div class="resizer" id="resizer"></div> <!-- Resizable Divider -->

    <!-- Right Section: Text Input and Display -->
    <div class="right-section" id="rightSection">
      <div class="section-title">Enter Text</div>
      <textarea id="textInput" rows="4" placeholder="Type your text here..."></textarea>
      <button class="submit-button" onclick="addTextInput()">Add Text</button>
      <div id="textInputsContainer"></div> <!-- Container for multiple text inputs -->
      <div class="display-section" id="displayTextSection"></div>
    </div>
  </div>

  <!-- Modal for Image Popup -->
  <div class="modal" id="imageModal">
    <span class="close-modal" onclick="closeModal()">&times;</span>
    <img id="modalImage" alt="Enlarged Image">
  </div>

  <script>
    let imagesArray = [];
    let textInputs = [];
    const storageKey = 'userInputs';

    // Load saved inputs from local storage on page load
    window.onload = function() {
      const savedData = JSON.parse(localStorage.getItem(storageKey));
      if (savedData) {
        imagesArray = savedData.images || [];
        textInputs = savedData.texts || [];

        // Restore images
        imagesArray.forEach(imgUrl => {
          addThumbnailFromStorage(imgUrl);
        });

        // Restore text inputs
        textInputs.forEach(text => {
          addTextInputToDOM(text);
        });

        // Show the first image if available
        if (imagesArray.length > 0) {
          document.getElementById('displayImage').src = imagesArray[0];
        }
      }
    };

    // Function to add thumbnail images
    function addThumbnail() {
      const fileInput = document.getElementById('imageInput');
      const thumbnailsContainer = document.getElementById('thumbnailsContainer');
      const displayImage = document.getElementById('displayImage');
      const files = fileInput.files;

      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const reader = new FileReader();
        
        reader.onload = function(e) {
          const imgUrl = e.target.result;

          // Add to array and create thumbnail
          imagesArray.push(imgUrl);
          addThumbnailToDOM(imgUrl, thumbnailsContainer, displayImage);
          saveToLocalStorage(); // Save to local storage
        };
        reader.readAsDataURL(file);
      }
    }

    // Function to add thumbnail to the DOM
    function addThumbnailToDOM(imgUrl, thumbnailsContainer, displayImage) {
      const thumbnailWrapper = document.createElement('div');
      const thumbnail = document.createElement('img');
      thumbnail.src = imgUrl;

      // Create delete icon with Font Awesome
      const deleteIcon = document.createElement('span');
      deleteIcon.innerHTML = '<i class="fa-solid fa-trash delete-icon"></i>';
      deleteIcon.onclick = function() {
        const index = imagesArray.indexOf(imgUrl);
        if (index > -1) {
          imagesArray.splice(index, 1); // Remove from array
          thumbnailWrapper.remove(); // Remove from DOM
          saveToLocalStorage(); // Save changes to local storage
        }
      };

      thumbnail.onclick = function() {
        displayImage.src = imgUrl; // Display clicked image
      };

      thumbnailWrapper.appendChild(thumbnail);
      thumbnailWrapper.appendChild(deleteIcon); // Append delete icon
      thumbnailsContainer.appendChild(thumbnailWrapper);
    }

    // Function to add thumbnail from local storage (on page load)
    function addThumbnailFromStorage(imgUrl) {
      const thumbnailsContainer = document.getElementById('thumbnailsContainer');
      const displayImage = document.getElementById('displayImage');
      addThumbnailToDOM(imgUrl, thumbnailsContainer, displayImage);
    }

    // Save inputs to local storage
    function saveToLocalStorage() {
      localStorage.setItem(storageKey, JSON.stringify({ images: imagesArray, texts: textInputs }));
    }

    // Function to add text input and display it
    function addTextInput() {
      const textValue = document.getElementById('textInput').value;

      if (textValue.trim() !== '') {
        textInputs.push(textValue); // Add to textInputs array
        addTextInputToDOM(textValue); // Display in the text section
        document.getElementById('textInput').value = ''; // Clear the input
        saveToLocalStorage(); // Save to local storage
      }
    }

    // Function to add text input to the DOM
    function addTextInputToDOM(text) {
      const textInputsContainer = document.getElementById('textInputsContainer');
      const textWrapper = document.createElement('div');
      textWrapper.classList.add('input-group');

      const textElement = document.createElement('p');
      textElement.textContent = text;
      textElement.style.display = 'block';

      const deleteTextIcon = document.createElement('span');
      deleteTextIcon.innerHTML = '<i class="fa-solid fa-trash delete-text-icon"></i>'; // Font Awesome trash icon
      deleteTextIcon.onclick = function() {
        const index = textInputs.indexOf(text);
        if (index > -1) {
          textInputs.splice(index, 1); // Remove from array
          textWrapper.remove(); // Remove from DOM
          saveToLocalStorage(); // Save changes to local storage
        }
      };

      // Append text element first, then delete icon
      textWrapper.appendChild(textElement);
      textWrapper.appendChild(deleteTextIcon);
      textInputsContainer.appendChild(textWrapper);
    }

    // Resizable divider functionality
    const resizer = document.getElementById('resizer');
    const leftSection = document.getElementById('leftSection');
    const rightSection = document.getElementById('rightSection');

    let isResizing = false;

    resizer.addEventListener('mousedown', (e) => {
      isResizing = true;
    });

    window.addEventListener('mousemove', (e) => {
      if (!isResizing) return;
      const newWidth = e.clientX - leftSection.offsetLeft;
      leftSection.style.width = `${newWidth}px`;
      rightSection.style.width = `calc(100% - ${newWidth}px - 10px)`; // Account for the resizer width
    });

    window.addEventListener('mouseup', () => {
      isResizing = false;
    });

    // Function to open modal with full image
    function openModal() {
      const modal = document.getElementById('imageModal');
      const modalImage = document.getElementById('modalImage');
      const displayImage = document.getElementById('displayImage');
      
      modalImage.src = displayImage.src; // Set modal image to current display image
      modal.style.display = 'flex'; // Show modal
    }

    // Function to close modal
    function closeModal() {
      const modal = document.getElementById('imageModal');
      modal.style.display = 'none'; // Hide modal
    }
  </script>
</body>
</html>
