<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>BsBookpad - Download</title> <link rel="icon" type="image/x-icon" href="https://i.ibb.co/s2hfQSZ/bokpad.png"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> <style> @import url('https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Orbitron:wght@400..900&family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&family=Strait&display=swap'); /* General Styles */ * { color: rgb(219, 219, 219); box-sizing: border-box; } ::-webkit-scrollbar { width: 8px; height: 8px; } ::-webkit-scrollbar-thumb { background-color: #4a4a4a; border-radius: 0px; cursor: pointer; width: 120px; } ::-webkit-scrollbar-thumb:hover { background-color: #8f8f8f; } ::-webkit-scrollbar-track { background-color: #2e2e2e; bottom: 0px; } * { -webkit-tap-highlight-color: transparent; } body { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } body, html { margin: 0; padding: 0; width: 100%; height: 95%; display: flex; justify-content: center; align-items: center; background-color: #000000; position: fixed; font-family: "Red Hat Display", sans-serif; letter-spacing: 0.6px; } /* Logo and Container Styles */ .logo { position: fixed; top: 31px; left: 40px; font-size: 24px; color: #004cff; font-weight: 600; text-decoration: none; } .fullscreen-container { display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; height: 100%; padding: 60px; z-index: -100; } /* Editable Div Styles */ .editable-div { width: 80%; height: 480px; padding: 30px; font-size: 16px; background-color: rgb(55 55 55 / 59%); color: #c6c6c6; border-radius: 45px; border: solid 1.5px rgb(255 255 255 / 0%); outline: none; font-family: "Red Hat Display", sans-serif; letter-spacing: 0.5px; font-weight: 500; transition: font-size 0.3s ease, background-color 0.3s ease, color 0.3s ease; overflow-y: auto; white-space: pre-wrap; margin-bottom: 20px; position: relative; top: 30px; display: flow; line-height: 1.5; } .editable-div:empty:before { content: attr(data-placeholder); color: var(--placeholder-color, #c6c6c6); pointer-events: none; } .editable-div:focus { background-color: #ffffff2a; } .editable-div::-webkit-scrollbar-track { background: transparent; margin-left: 35px; margin-right: 35px; margin-top: 35px; margin-bottom: 35px; } /* Icon Buttons Styles */ .icon-buttons { display: flex; gap: 25px; position: fixed; bottom: 30px; background: #ffffff1f; border-radius: 100px; width: 92%; justify-content: center; align-items: center; max-width: 450px; padding: 8px; } .delete-icon { background-color: #ff0d00; color: white; } .copy-single-icon { background-color: #00e208c1; color: white; } .uppercase-icon { background-color: #bc00ff; color: white; } .download-image-icon { background-color: #ff0056; color: white; } .download-pdf-icon { background-color: #008eff; color: white; } .save-icon { background-color: #00c4b4; color: white; } .sidebar-icon { background-color: #ff9500; color: white; } .delete-icon:hover { background-color: #ff0d00c3; } .copy-single-icon:hover { background-color: #00e20882; } .uppercase-icon:hover { background-color: #bb00ffca; } .download-image-icon:hover { background-color: #ff0056b0; } .download-pdf-icon:hover { background-color: #008cffb9; } .save-icon:hover { background-color: #00c4b4b9; } .sidebar-icon:hover { background-color: #ff9500b9; } .icon-buttons i:hover { transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); } /* Color Picker and Font Controls */ .color-picker-container { position: fixed; bottom: 25px; right: 300px; display: flex; flex-direction: column; align-items: center; gap: 10px; background: #2b2b2b; padding: 10px; border-radius: 30px; } .color-picker-label { font-size: 13px; color: #c6c6c6; } .color-picker { border: none; background: transparent; cursor: pointer; padding: 4px; width: 35px; height: 35px; } .color-picker-container div { display: flex; justify-content: center; align-items: center; background: black; padding: 2px 15px; border-radius: 100px; gap: 0px; } .font-size-container { position: fixed; bottom: 25px; left: 315px; display: flex; align-items: center; gap: 10px; background: #2b2b2b; padding: 10px; border-radius: 25px; justify-content: center; flex-direction: column; width: 8%; } .font-weight-container { position: fixed; bottom: 70px; right: 10px; display: flex; align-items: center; gap: 10px; background: #2b2b2b; padding: 10px; border-radius: 13px; } .font-size-label, .font-weight-label { font-size: 14px; color: #c6c6c6; } .font-size-button, .font-weight-select { background-color: #000000; color: #c6c6c6; border: none; border-radius: 122px; padding: 5px 15px; font-family: "Red Hat Display", sans-serif; cursor: pointer; } /* Message and Watermark */ .message { margin-top: 10px; color: white; text-align: center; position: fixed; top: 30px; font-weight: 400; padding: 10px 20px; z-index: 10000000; background: #0029ff8c; border-radius: 33px; border: none; right: 45px; } .watermark { position: absolute; top: 5px; left: 5px; font-size: 8px; opacity: 0.9; font-family: "Red Hat Display", sans-serif; } .watermark a { color: inherit; text-decoration: none; } .text-content { white-space: pre-wrap; line-height: 1.5; margin: 0; padding: 0; } /* Sidebar Styles */ .sidebar { position: fixed; bottom: 0; right: -550px; width: 450px; height: 85%; background: rgb(27 27 27); backdrop-filter: blur(10px); box-shadow: -5px 0 15px rgb(0 0 0 / 64%); z-index: 1000; transition: right 0.3s ease; padding: 20px; overflow-y: auto; border-left: 1px solid rgba(255, 255, 255, 0.1); border-radius: 28px 0px 0px 0px; } .sidebar.open { right: 0; } .icon-buttons svg{ width: 45px; height: 45px; fill: white; cursor: pointer; padding: 10px; }svg:hover{ background-color: #ffffff47; border-radius: 15px; } .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); } .sidebar-title { font-size: 20px; color: #ffffff; font-weight: 600; } .close-sidebar { font-size: 20px; color: #c6c6c6; cursor: pointer; transition: color 0.3s ease; } .close-sidebar:hover { color: #ffffff; } .save-form { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; } .save-form input { padding: 10px; background: #1b1b1b; border: 1px solid #3a3a3a; border-radius: 5px; color: #c6c6c6; font-family: "Red Hat Display", sans-serif; outline: none; } .save-form button { padding: 10px; background: #004cff; border: none; border-radius: 5px; color: white; font-family: "Red Hat Display", sans-serif; cursor: pointer; transition: background 0.3s ease; } .save-form button:hover { background: #002cff; } .saved-item { margin-bottom: 15px; padding: 10px; border-radius: 8px; transition: background 0.3s ease; } .saved-item:hover { background: #373737; } .saved-item-title { font-size: 16px; color: #00ceff; font-weight: 600; cursor: pointer; margin-bottom: 5px; display: flex ; gap: 5px; align-items: center; justify-content: space-between; background: #373737; padding: 2px 13px; border-radius: 7px; } .saved-item-title:hover { text-decoration: underline; } .saved-item-content { font-size: 11px; color: #c6c6c6; display: none; padding: 10px; background: rgb(27 27 27); border-radius:10px; overflow: auto; white-space: pre-wrap; /* Preserve line breaks and spaces */ line-height: 1.5; /* Match editable-div for consistent spacing */ } .saved-item-content.show { display: block; } .saved-item-content.show:hover { font-size: 13px; } .sidebar::-webkit-scrollbar-track { background: transparent; margin-top: 55px; margin-bottom: 0px; } .copy-item, .delete-item { font-size: 11px; cursor: pointer; margin-top: 9px; transition: color 0.3s ease; padding: 6px 14px; border-radius: 8px; text-align: center; font-weight: 600; } .copy-item { color: #00ff6c; background: #0eff0026; } .copy-item:hover { color: black; background: #00e208; } .delete-item { color: #ff3e32; background: #870700b0; font-weight: 600; } .delete-item:hover { background-color: #ff0d00; color: white; } .saved-item-actions { display: flex; gap: 10px; justify-content: flex-start; } /* Responsive Design */ @media (max-width: 768px) { .fullscreen-container { padding: 40px; } .editable-div { height: 35%; padding: 15px; font-size: 1rem; } .icon-buttons i { font-size: 0.9rem; padding: 8px 16px; } .message { font-size: 1rem; } .color-picker-container { bottom: 70px; right: 20px; } .color-picker-label { font-size: 12px; } .color-picker { width: 30px; height: 30px; } .font-size-container { bottom: 80px; left: 5px; width: 40%; } .font-weight-container { bottom: 170px; right: 20px; } .font-size-label, .font-weight-label { font-size: 12px; } .font-size-button, .font-weight-select { font-size: 12px; } .sidebar { width: 350px; right: -580px; height: 91%; } .sidebar-title { font-size: 18px; } .save-form input, .save-form button { font-size: 14px; } } @media (max-width: 480px) { .fullscreen-container { padding: 20px; } .editable-div { height: 56%; padding: 30px; font-size: 14px; width: 95%; position: fixed; top: 100px; } .icon-buttons i { font-size: 15px; } .icon-buttons { position: fixed; bottom: 15px; padding: 8px 0px;} .message { font-size: 13px; top: 0px; right: 10px; } .logo { position: fixed; top: 10px; left: 10px; font-size: 18px; } .color-picker-container {bottom: 80px; right: 15px; background: #2b2b2b; padding: 10px; border-radius: 25px;} .color-picker-label { font-size: 11px; } .color-picker { width: 25px; height: 25px; } .font-size-container { bottom: 80px; padding: 10px; left: 15px; width: 30%;} .font-weight-container { bottom: 180px; right: 5px; } .font-size-label, .font-weight-label { font-size: 11px; } .font-size-button, .font-weight-select { font-size: 11px; } .sidebar { width: 350px; right: -540px; } .sidebar-title { font-size: 16px; } .save-form input, .save-form button { font-size: 12px; } .icon-buttons svg { width: 40px; height: 40px; fill: white; cursor: pointer; padding: 10px; } } </style> </head> <body> <div class="logo">BsBookpad <i style="background: #ffffff3d; padding: 9px; margin-left: 0px; border-radius: 13px; font-size: 20px;" class="fa-solid fa-cloud-arrow-down"></i></div> <div class="fullscreen-container"> <div id="paragraphInput" class="editable-div" contenteditable="true" data-placeholder="Type your paragraph..."></div> <div class="icon-buttons"> <svg onclick="toggleCase()" title="Toggle Case" viewBox="0 0 24 24"><path d="M21,7v.424A4.95,4.95,0,0,0,19,7a5,5,0,0,0,0,10,4.95,4.95,0,0,0,2-.424V17h3V7Zm-2,7a2,2,0,1,1,2-2A2,2,0,0,1,19,14Z"/><path d="M0,17H3.354l1-2h6.292l1,2H15L7.5,2Zm5.854-5L7.5,8.708,9.146,12Z"/></svg> <svg onclick="newInput()" title="Clear Field" viewBox="0 0 24 24"><path d="m12.414,11l3,3h7.586c.552,0,1,.448,1,1s-.448,1-1,1h-5.586l3,3h2.586c.552,0,1,.448,1,1s-.448,1-1,1h-.586l1.293,1.293c.391.391.391,1.023,0,1.414-.195.195-.451.293-.707.293s-.512-.098-.707-.293L.293,1.707C-.098,1.316-.098.684.293.293S1.316-.098,1.707.293l3.707,3.707h17.586c.552,0,1,.448,1,1s-.448,1-1,1H7.414l3,3h12.586c.552,0,1,.448,1,1s-.448,1-1,1h-10.586Zm2.586,8H1c-.552,0-1,.448-1,1s.448,1,1,1h14c.552,0,1-.448,1-1s-.448-1-1-1Zm-14-3h9c.552,0,1-.448,1-1s-.448-1-1-1H1c-.552,0-1,.448-1,1s.448,1,1,1Zm0-5h4c.552,0,1-.448,1-1s-.448-1-1-1H1c-.552,0-1,.448-1,1s.448,1,1,1Z"/></svg> <svg onclick="copySingleLine()" title="Copy Text" viewBox="0 0 24 24"><path d="M21.155,3.272,18.871.913A3.02,3.02,0,0,0,16.715,0H12A5.009,5.009,0,0,0,7.1,4H7A5.006,5.006,0,0,0,2,9V19a5.006,5.006,0,0,0,5,5h6a5.006,5.006,0,0,0,5-5v-.1A5.009,5.009,0,0,0,22,14V5.36A2.988,2.988,0,0,0,21.155,3.272ZM13,22H7a3,3,0,0,1-3-3V9A3,3,0,0,1,7,6v8a5.006,5.006,0,0,0,5,5h4A3,3,0,0,1,13,22Zm4-5H12a3,3,0,0,1-3-3V5a3,3,0,0,1,3-3h4V4a2,2,0,0,0,2,2h2v8A3,3,0,0,1,17,17Z"/></svg> <svg onclick="downloadAsImage()" title="Download as Image" viewBox="0 0 24 24"><path d="M9,7.5c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5-.67,1.5-1.5,1.5-1.5-.67-1.5-1.5Zm15-.5v6c0,2.76-2.24,5-5,5H10c-2.76,0-5-2.24-5-5V7c0-2.76,2.24-5,5-5h9c2.76,0,5,2.24,5,5ZM7,13c0,.77,.29,1.47,.77,2.01l5.24-5.24c.98-.98,2.69-.98,3.67,0l1.04,1.04c.23,.23,.62,.23,.85,0l3.43-3.43v-.38c0-1.65-1.35-3-3-3H10c-1.65,0-3,1.35-3,3v6Zm15,0v-2.79l-2.02,2.02c-.98,.98-2.69,.98-3.67,0l-1.04-1.04c-.23-.23-.61-.23-.85,0l-4.79,4.79c.12,.02,.24,.02,.37,.02h9c1.65,0,3-1.35,3-3Zm-5,7H5c-1.65,0-3-1.35-3-3v-6c0-.74,.27-1.45,.77-2,.37-.41,.33-1.04-.08-1.41-.41-.37-1.04-.33-1.41,.08-.82,.92-1.28,2.1-1.28,3.34v6c0,2.76,2.24,5,5,5h12c.55,0,1-.45,1-1s-.45-1-1-1Z"/></svg> <svg onclick="downloadAsPDF()" title="Download as PDF" viewBox="0 0 24 24"><path d="M20.1,5.39l-3.49-3.49c-1.23-1.23-2.86-1.9-4.6-1.9H6.5C4.02,0,2,2.02,2,4.5v15c0,2.48,2.02,4.5,4.5,4.5h11c2.48,0,4.5-2.02,4.5-4.5V9.99c0-1.74-.68-3.37-1.9-4.6Zm-.71,.71c.55,.55,.97,1.2,1.24,1.9h-5.13c-.83,0-1.5-.67-1.5-1.5V1.37c.71,.27,1.35,.69,1.9,1.24l3.49,3.49Zm1.61,13.4c0,1.93-1.57,3.5-3.5,3.5H6.5c-1.93,0-3.5-1.57-3.5-3.5V4.5c0-1.93,1.57-3.5,3.5-3.5h5.51c.33,0,.66,.03,.99,.09V6.5c0,1.38,1.12,2.5,2.5,2.5h5.41c.06,.32,.09,.65,.09,.99v9.51ZM6.97,13h-.97c-.55,0-1,.45-1,1v4.5c0,.28,.22,.5,.5,.5s.5-.22,.5-.5v-1.5h.97c1.11,0,2.01-.92,2.01-2.02s-.9-1.98-2.01-1.98Zm0,3h-.97v-2h.97c.56,0,1.01,.44,1.01,.98s-.46,1.02-1.01,1.02Zm5.03-3h0s-.51,0-1,0c-.55,0-1,.45-1,1v4c0,.55,.45,1,1,1,.48,0,.97,0,1,0h0c1.11,0,2-.89,2-1.98v-2.03c0-1.09-.89-1.98-2-1.98Zm1,4.02c0,.53-.43,.96-.96,.98h-1.04v-4h1.04c.53,.02,.96,.46,.96,.98v2.03Zm6-3.52c0,.28-.22,.5-.5,.5h-2.5v2s1.5,0,1.5,0c.28,0,.5,.22,.5,.5s-.22,.5-.5,.5h-1.5v1.5c0,.28-.22,.5-.5,.5s-.5-.22-.5-.5v-4.5c0-.55,.45-1,1-1h2.5c.28,0,.5,.22,.5,.5Z"/></svg> <svg onclick="toggleSidebar()" title="Saved Items" viewBox="0 0 24 24"><path d="m23.493,11.017c-.487-.654-1.234-1.03-2.05-1.03h-.443v-1.987c0-2.757-2.243-5-5-5h-5.056c-.154,0-.31-.037-.447-.105l-3.155-1.578c-.414-.207-.878-.316-1.342-.316h-2C1.794,1,0,2.794,0,5v13c0,2.757,2.243,5,5,5h12.558c2.226,0,4.15-1.432,4.802-3.607l1.532-6.116c.234-.782.089-1.605-.398-2.26ZM2,18V5c0-1.103.897-2,2-2h2c.154,0,.31.037.447.105l3.155,1.578c.414.207.878.316,1.342.316h5.056c1.654,0,3,1.346,3,3v1.987h-10.385c-1.7,0-3.218,1.079-3.789,2.72l-2.19,7.138c-.398-.509-.636-1.15-.636-1.845Zm19.964-5.253 -1.532,6.115c-.384,1.279-1.539,2.138-2.874,2.138H5c-.208,0-.411-.021-.607-.062l2.334-7.609c.279-.803,1.039-1.342,1.889-1.342h12.828c.242,0,.383.14.445.224.062.084.156.259.075.536Z"/></svg> </div> <div class="message" id="message"><a href="https://blackswan19.github.io/bscrop/formbs" style="text-decoration: none;">#BsWorld</a></div> <div class="color-picker-container"> <div><span class="color-picker-label">Background:</span><br> <input type="color" id="imageBackgroundColor" class="color-picker" value="#1b1b1b" title="Background Color"> </div> <div><span class="color-picker-label">Text color:</span><br> <input type="color" id="imageTextColor" class="color-picker" value="#c6c6c6" title="Text Color"> </div> </div> <div class="font-size-container"> <button id="fontSizeButton" class="font-size-button" onclick="promptFontSize()">Font Size</button> <span class="font-weight-label">Weight:</span> <select id="fontWeightSelect" class="font-weight-select"> <option value="100">100</option> <option value="200">200</option> <option value="300">300</option> <option value="400" selected>400</option> <option value="500">500</option> <option value="600">600</option> <option value="700">700</option> <option value="800">800</option> <option value="900">900</option> </select> </div> <div class="sidebar" id="sidebar"> <div class="sidebar-header"> <span class="sidebar-title">Saved Items</span> <i class="fa-solid fa-times close-sidebar" onclick="toggleSidebar()"></i> </div> <div class="save-form"> <input type="text" id="saveTitle" placeholder="Title to save..."> <button onclick="saveWithTitle()">Save</button> </div> <div id="savedItems"></div> </div> </div>
      <script>
   const editableDiv = document.getElementById('paragraphInput');
document.addEventListener('contextmenu', e => e.preventDefault());
   document.addEventListener('DOMContentLoaded', () => {
      const savedData = JSON.parse(localStorage.getItem('bsBookpadData') || '{}');

      if (savedData.text) editableDiv.innerHTML = savedData.text;

      if (savedData.backgroundColor) {
         document.getElementById('imageBackgroundColor').value = savedData.backgroundColor;
         editableDiv.style.setProperty('--bg-color', savedData.backgroundColor);
         editableDiv.style.backgroundColor = savedData.backgroundColor;
      }

      if (savedData.textColor) {
         document.getElementById('imageTextColor').value = savedData.textColor;
         editableDiv.style.setProperty('--text-color', savedData.textColor);
         editableDiv.style.color = savedData.textColor;
         editableDiv.style.setProperty('--placeholder-color', savedData.textColor);
      }

      if (savedData.fontSize) {
         editableDiv.style.fontSize = `${savedData.fontSize}px`;
      }

      if (savedData.fontWeight) {
         editableDiv.style.fontWeight = savedData.fontWeight;
         document.getElementById('fontWeightSelect').value = savedData.fontWeight;
      }

      loadSavedItems();
   });

   function saveInput(showMessage = true) {
      const data = {
         text: editableDiv.innerHTML,
         backgroundColor: document.getElementById('imageBackgroundColor').value,
         textColor: document.getElementById('imageTextColor').value,
         fontSize: editableDiv.style.fontSize.replace('px', '') || '16',
         fontWeight: document.getElementById('fontWeightSelect').value
      };
      localStorage.setItem('bsBookpadData', JSON.stringify(data));
      if (showMessage) displayMessage('Auto-saved!');
   }

   document.getElementById('imageBackgroundColor').addEventListener('input', function () {
      const color = this.value;
      editableDiv.style.setProperty('--bg-color', color);
      editableDiv.style.backgroundColor = color;
      saveInput(false);
   });
   document.getElementById('imageTextColor').addEventListener('input', function () {
      const color = this.value;
      editableDiv.style.setProperty('--text-color', color);
      editableDiv.style.color = color;
      editableDiv.style.setProperty('--placeholder-color', color);
      saveInput(false);
   });

   editableDiv.addEventListener('paste', function (e) {
      e.preventDefault();
      const text = (e.clipboardData || window.clipboardData).getData('text/plain');
      document.execCommand('insertText', false, text);
      saveInput(false);
   });

   editableDiv.addEventListener('input', () => saveInput(false));

   function promptFontSize() {
      const size = prompt('Enter font size (px):', editableDiv.style.fontSize.replace('px', '') || '16');
      if (size && !isNaN(size) && size > 0) {
         editableDiv.style.fontSize = size + 'px';
         saveInput(false);
         displayMessage(`Font size: ${size}px`);
      }
   }
   document.getElementById('fontWeightSelect').addEventListener('change', function () {
      const weight = this.value;
      editableDiv.style.fontWeight = weight;
      saveInput(false);
      displayMessage(`Font weight: ${weight}`);
   });

   let isUpperCase = false;
   function toggleCase() {
      const text = editableDiv.innerText.trim();
      if (!text) return displayMessage("No text to convert!");
      editableDiv.innerText = isUpperCase ? text.toLowerCase() : text.toUpperCase();
      isUpperCase = !isUpperCase;
      displayMessage(isUpperCase ? "Uppercase" : "Lowercase");
      saveInput(false);
   }

   function newInput() {
      if (confirm("Clear all text and reset?")) {
         editableDiv.innerHTML = '';
         localStorage.removeItem('bsBookpadData');
         location.reload();
      }
   }

   function copySingleLine() {
      const text = editableDiv.innerText.trim();
      if (!text) return displayMessage("Nothing to copy!");
      navigator.clipboard.writeText(text);
      displayMessage("Copied to clipboard!");
   }

   function getLuminance(hex) {
      const r = parseInt(hex.substr(1, 2), 16) / 255;
      const g = parseInt(hex.substr(3, 2), 16) / 255;
      const b = parseInt(hex.substr(5, 2), 16) / 255;
      return 0.2126 * r + 0.7152 * g + 0.0722 * b;
   }
   function getContrastColor(hex) {
      return getLuminance(hex) > 0.5 ? '#000000' : '#FFFFFF';
   }

   function downloadAsImage() {
      if (!editableDiv.innerText.trim()) return displayMessage("Nothing to download!");

      const bgColor = document.getElementById('imageBackgroundColor').value;
      const textColor = document.getElementById('imageTextColor').value;

      const wrapper = document.createElement('div');
      wrapper.style.position = 'absolute';
      wrapper.style.left = '-9999px';
      wrapper.style.backgroundColor = bgColor;
      wrapper.style.padding = '40px';
      wrapper.style.fontFamily = '"Red Hat Display", sans-serif';
      wrapper.style.lineHeight = '1.5';
      wrapper.style.whiteSpace = 'pre-wrap';

      const clone = editableDiv.cloneNode(true);
      clone.style.backgroundColor = bgColor;
      clone.style.color = textColor;
      clone.style.width = editableDiv.offsetWidth + 'px';
      clone.style.minHeight = '400px';
      clone.style.padding = '30px';
      clone.style.borderRadius = '45px';
      clone.style.fontSize = editableDiv.style.fontSize;
      clone.style.fontWeight = editableDiv.style.fontWeight;

      const watermark = document.createElement('div');
      watermark.textContent = 'Made in BsBookpad';
      watermark.style.position = 'absolute';
      watermark.style.bottom = '10px';
      watermark.style.right = '15px';
      watermark.style.fontSize = '10px';
      watermark.style.opacity = '0.7';
      watermark.style.color = getContrastColor(bgColor);

      wrapper.appendChild(clone);
      wrapper.appendChild(watermark);
      document.body.appendChild(wrapper);

      html2canvas(wrapper, { scale: 2, backgroundColor: bgColor }).then(canvas => {
         const link = document.createElement('a');
         link.download = 'bsbookpad_image.png';
         link.href = canvas.toDataURL('image/png');
         link.click();
         document.body.removeChild(wrapper);
         displayMessage("Image downloaded!");
      });
   }

   function downloadAsPDF() {
      if (!editableDiv.innerText.trim()) return displayMessage("Nothing to download!");

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const bgColor = document.getElementById('imageBackgroundColor').value;
      const textColor = document.getElementById('imageTextColor').value;
      const fontSize = parseInt(editableDiv.style.fontSize) || 16;

      const bgR = parseInt(bgColor.substr(1, 2), 16);
      const bgG = parseInt(bgColor.substr(3, 2), 16);
      const bgB = parseInt(bgColor.substr(5, 2), 16);

      const textR = parseInt(textColor.substr(1, 2), 16);
      const textG = parseInt(textColor.substr(3, 2), 16);
      const textB = parseInt(textColor.substr(5, 2), 16);

      doc.setFillColor(bgR, bgG, bgB);
      doc.rect(0, 0, 210, 297, 'F');
      doc.setTextColor(textR, textG, textB);
      doc.setFontSize(fontSize);

      const lines = doc.splitTextToSize(editableDiv.innerText, 180);
      doc.text(lines, 15, 20);

      const watermarkColor = getContrastColor(bgColor);
      doc.setTextColor(watermarkColor);
      doc.setFontSize(8);
      doc.text('Made in BsBookpad â€¢ https://blackswan19.github.io', 15, 290);

      doc.save('bsbookpad.pdf');
      displayMessage("PDF downloaded!");
   }

   function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
   }

   function saveWithTitle() {
      const title = document.getElementById('saveTitle').value.trim();
      const content = editableDiv.innerText.trim();
      if (!title) return displayMessage("Enter a title!");
      if (!content) return displayMessage("Nothing to save!");

      const items = JSON.parse(localStorage.getItem('savedItems') || '[]');
      items.push({ title, content, timestamp: Date.now() });
      localStorage.setItem('savedItems', JSON.stringify(items));
      document.getElementById('saveTitle').value = '';
      loadSavedItems();
      displayMessage(`Saved as "${title}"`);
   }

   function loadSavedItems() {
      const container = document.getElementById('savedItems');
      const items = JSON.parse(localStorage.getItem('savedItems') || '[]');
      container.innerHTML = items.length === 0 ? '<p style="text-align:center;color:#666">No saved items</p>' : '';

      items.reverse().forEach((item, idx) => {
         const div = document.createElement('div');
         div.className = 'saved-item';
         div.innerHTML = `
            <div class="saved-item-title" onclick="loadSavedContent('${item.content.replace(/'/g, "\\'")}')">${item.title}</div>
            <div class="saved-item-actions">
               <span class="copy-item" onclick="navigator.clipboard.writeText('${item.content.replace(/'/g, "\\'")}'); displayMessage('Copied!')">Copy</span>
               <span class="delete-item" onclick="deleteSavedItem(${items.length - 1 - idx})">Delete</span>
            </div>
         `;
         container.appendChild(div);
      });
   }

   function loadSavedContent(text) {
      editableDiv.innerText = text;
      saveInput(false);
      displayMessage("Content loaded!");
   }

   function deleteSavedItem(index) {
      const items = JSON.parse(localStorage.getItem('savedItems') || '[]');
      items.splice(index, 1);
      localStorage.setItem('savedItems', JSON.stringify(items));
      loadSavedItems();
      displayMessage("Item deleted");
   }

   function displayMessage(text) {
      const msg = document.getElementById('message');
      msg.textContent = text;
      clearTimeout(msg.timer);
      msg.timer = setTimeout(() => msg.textContent = '#BsWorld', 3000);
   }

   displayMessage('#BsWorld');
    </script>
</body>
</html>
